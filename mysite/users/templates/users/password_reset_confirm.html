{% extends 'users/base.html' %}

{% block body %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="card shadow-lg p-4 rounded-4 reset-card" style="max-width: 420px; width: 100%; border: none;">
        {% if validlink %}
        <h2 class="text-center mb-4 fw-bold reset-title">
            Reset Your Password
        </h2>

        <form method="POST" class="needs-validation" novalidate>
            {% csrf_token %}

            {% for field in form %}
            <div class="mb-3">
                <label for="{{ field.id_for_label }}" class="form-label fw-semibold reset-label">
                    {{ field.label }}
                </label>
                {{ field }}
                {% if field.help_text %}
                <div class="form-text small reset-help">
                    {{ field.help_text }}
                </div>
                {% endif %}
                {% for error in field.errors %}
                <div class="text-danger small">{{ error }}</div>
                {% endfor %}
            </div>
            {% endfor %}

            <button type="submit" class="btn w-100 rounded-pill py-2 fw-semibold shadow-sm reset-btn">
                Submit
            </button>
        </form>
        {% else %}
        <h4 class="invalid-link text-center fw-bold">
            Password Reset Link Is Invalid
        </h4>
        {% endif %}
    </div>
</div>

<style>
    /* ===== Light mode ===== */
    .reset-card {
        background: #fff;
        transition: background 0.3s, color 0.3s;
    }

    .reset-title {
        color: #6a11cb;
    }

    .reset-btn {
        background: linear-gradient(135deg, #6a11cb, #2575fc);
        color: #fff;
        border: none;
    }

    .reset-label {
        color: #333;
    }

    .reset-help {
        color: #555;
    }

    input[type="text"],
    input[type="password"],
    input[type="email"],
    textarea,
    select {
        width: 100%;
        border-radius: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        outline: none;
        font-size: 0.95rem;
        background: #fff;
        color: #000;
        transition: background 0.3s, color 0.3s, border-color 0.3s;
    }

    input:focus,
    textarea:focus,
    select:focus {
        border-color: #6a11cb;
        box-shadow: 0 0 5px rgba(106, 17, 203, 0.4);
    }

    .invalid-link {
        color: #e74c3c;
    }

    /* ===== Dark mode ===== */
    body.dark-mode .reset-card {
        background: #1e1e1e;
        border: 1px solid #333;
    }

    body.dark-mode .reset-title {
        color: #a57dff;
    }

    body.dark-mode .reset-label {
        color: #eaeaea;
    }

    body.dark-mode .reset-help {
        color: #aaa;
    }

    body.dark-mode input[type="text"],
    body.dark-mode input[type="password"],
    body.dark-mode input[type="email"],
    body.dark-mode textarea,
    body.dark-mode select {
        background: #2b2b2b;
        border: 1px solid #555;
        color: #f1f1f1;
    }

    body.dark-mode input:focus,
    body.dark-mode textarea:focus,
    body.dark-mode select:focus {
        border-color: #a57dff;
        box-shadow: 0 0 5px rgba(165, 125, 255, 0.4);
    }

    body.dark-mode .reset-btn {
        background: linear-gradient(135deg, #a57dff, #4d8cff);
    }

    body.dark-mode .invalid-link {
        color: #ff7b7b;
    }
</style>
{% endblock %}